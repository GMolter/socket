<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gavin vs. Carson - Scoreboard</title>
  <style>
    /* Page background and font */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #333;
    }

    /* Main title */
    h1 {
      margin: 1rem;
      font-size: 3rem; /* Big title */
    }

    /******************************************************
     * SCOREBOARD (Desktop Only)
     ******************************************************/
    #scoreboard {
      display: flex;
      gap: 3rem; /* More spacing between players */
      margin-bottom: 3rem; /* More bottom margin */
    }
    .player {
      text-align: center;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      padding: 2rem 3rem;
    }
    .player h2 {
      margin: 0;
      font-size: 2rem; /* Bigger name text */
    }
    .score-value {
      display: block;
      font-size: 4rem; /* Bigger score */
      font-weight: bold;
      margin-top: 1rem;
    }

    /******************************************************
     * CONTROLS (Mobile Only)
     ******************************************************/
    #controls {
      display: none; /* We'll toggle this in JS for mobile */
      text-align: center;
      margin-bottom: 3rem;
    }

    /* Table layout for mobile buttons */
    #controls table {
      margin: 0 auto; /* Center the table */
      border-spacing: 1rem;
    }
    #controls th {
      font-size: 2rem;
      padding-bottom: 0.5rem;
    }
    #controls td {
      text-align: center;
    }

    /* Button styling */
    button {
      font-size: 2rem; /* Really big text */
      padding: 1.5rem 2.5rem;
      cursor: pointer;
      border: none;
      border-radius: 12px;
      color: #fff;
      margin: 0.5rem;
      transition: background-color 0.3s;
    }
    button:hover {
      opacity: 0.8;
    }
    /* Specific button colors */
    .increment {
      background-color: blue;
    }
    .decrement {
      background-color: red;
    }
    .reset {
      background-color: black;
      color: white;
    }

    /******************************************************
     * CONSOLE AREA
     ******************************************************/
    #console {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      background: #333;
      color: #eee;
      font-family: monospace;
      font-size: 1.2rem; /* Slightly larger console text */
      padding: 10px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

  <h1>Gavin vs. Carson</h1>

  <!-- Desktop Scoreboard -->
  <div id="scoreboard">
    <div class="player">
      <h2>Gavin</h2>
      <span id="gavinScore" class="score-value">0</span>
    </div>
    <div class="player">
      <h2>Carson</h2>
      <span id="carsonScore" class="score-value">0</span>
    </div>
  </div>

  <!-- Mobile Controls -->
  <div id="controls">
    <table>
      <tr>
        <th>Gavin</th>
        <th>Carson</th>
      </tr>
      <tr>
        <td><button id="gavinPlus" class="increment">+1</button></td>
        <td><button id="carsonPlus" class="increment">+1</button></td>
      </tr>
      <tr>
        <td><button id="gavinMinus" class="decrement">-1</button></td>
        <td><button id="carsonMinus" class="decrement">-1</button></td>
      </tr>
      <tr>
        <td colspan="2">
          <button id="resetScore" class="reset">RESET</button>
        </td>
      </tr>
    </table>
  </div>

  <!-- On-page console for logging WebSocket events -->
  <div id="console"></div>

<script>
  /************************************************************
   * 1. Simple device check (mobile vs. desktop)
   ************************************************************/
  function isMobile() {
    return /Mobi|Android/i.test(navigator.userAgent);
  }

  /************************************************************
   * 2. Toggle UI (scoreboard vs. controls) based on device
   ************************************************************/
  window.addEventListener("load", () => {
    const scoreboardDiv = document.getElementById("scoreboard");
    const controlsDiv = document.getElementById("controls");

    if (isMobile()) {
      // Hide scoreboard, show controls
      scoreboardDiv.style.display = "none";
      controlsDiv.style.display = "block";
    } else {
      // Show scoreboard, hide controls
      scoreboardDiv.style.display = "flex";
      controlsDiv.style.display = "none";
    }
  });

  /************************************************************
   * 3. On-page console logging
   ************************************************************/
  function log(message) {
    const consoleDiv = document.getElementById("console");
    const line = document.createElement("div");
    line.textContent = message;
    consoleDiv.appendChild(line);
    consoleDiv.scrollTop = consoleDiv.scrollHeight; // Auto-scroll
  }

  /************************************************************
   * 4. Connect to WebSocket server
   ************************************************************/
  const ws = new WebSocket("wss://renderwebsocket-u5u4.onrender.com");

  // Local scoreboard state
  let scoreboard = {
    gavin: 0,
    carson: 0
  };

  // Update the displayed scores
  function updateDisplay() {
    document.getElementById("gavinScore").textContent = scoreboard.gavin;
    document.getElementById("carsonScore").textContent = scoreboard.carson;
  }

  // Broadcast new scores to server
  function broadcastScores() {
    const data = {
      type: "score",
      scoreboard
    };
    ws.send(JSON.stringify(data));
  }

  /************************************************************
   * 5. Handle incoming messages
   ************************************************************/
  ws.onopen = () => log("WebSocket connected.");
  ws.onclose = () => log("WebSocket closed.");
  ws.onerror = (err) => log("WebSocket error: " + err);

  ws.onmessage = (event) => {
    try {
      const data = JSON.parse(event.data);
      if (data.type === "score") {
        scoreboard = data.scoreboard;
        updateDisplay();
        log(`Scores updated -> Gavin: ${scoreboard.gavin}, Carson: ${scoreboard.carson}`);
      }
    } catch (err) {
      log("Error parsing message: " + err);
    }
  };

  /************************************************************
   * 6. Mobile Buttons (Increment / Decrement)
   ************************************************************/
  document.getElementById("gavinPlus").addEventListener("click", () => {
    scoreboard.gavin++;
    broadcastScores();
  });
  document.getElementById("gavinMinus").addEventListener("click", () => {
    scoreboard.gavin--;
    broadcastScores();
  });
  document.getElementById("carsonPlus").addEventListener("click", () => {
    scoreboard.carson++;
    broadcastScores();
  });
  document.getElementById("carsonMinus").addEventListener("click", () => {
    scoreboard.carson--;
    broadcastScores();
  });
  document.getElementById("resetScore").addEventListener("click", () => {
    scoreboard.gavin = 0;
    scoreboard.carson = 0;
    broadcastScores();
  });
</script>
</body>
</html>
